<section class="admin-products-new">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  </head>
  
  <header class="page-header">
    <h1>Admin &raquo; New Product</h1>
  </header>

  <div class="well">
    <%= link_to 'All Products', [:admin, :products], class: 'btn btn-info' %>
  </div>

  <div class="row">
    <div class="col-sm-6 col-sm-offset-1">

                  <a href="#myPopup" data-rel="popup" class="ui-btn ui-btn-inline ui-corner-all ui-icon-plus ui-btn-icon-left">ADD</a>

            <div data-role="popup" id="myPopup" class="ui-content" style="min-width:250px;">
                <div>
                  <h3>Add Category</h3>
                  <%# <input type="text" name="user" id="usrnm" placeholder="New Category">
                  <input type="submit" data-inline="true" value="+"> %>
                  <%= form_for [:admin, @category], remote: true do |f| %>                

                    <div class="form-group">
                    <%= f.label :name %>
                    <%= f.text_field :name, class: 'form-control' %>
                   <%= f.submit 'Create Category', class: 'btn btn-primary' %>
                   </div>
                  <% end -%>
                </div>
            </div>

      <%= form_for [:admin, @product] do |form| %>

        <% if form.object.errors.any? %>
          <div class="alert alert-danger">
            <strong>The following errors prevented saving:</strong>
            <ul>
              <% form.object.errors.full_messages.each do |error| %>
                <li>
                  <%= error %>
                </li>
                <% end %>
            </ul>
          </div>
          <% end %>

            <div class="form-group">
              <%= form.label :category %>
                <%= form.select :category_id, options_from_collection_for_select(Category.all.order(:name), :id, :name), { include_blank: true }, class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= form.label :name %>
                <%= form.text_field :name, class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= form.label :description %>
                <%= form.text_area :description, class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= form.label :quantity %>
                <%= form.number_field :quantity, class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= form.label :price %>
                <%= form.text_field :price, class: 'form-control' %>
            </div>



            <div class="form-group">
              <%= form.label :image %>
                <%= form.file_field :image %>
            </div>

            <%= form.submit 'Create Product', class: 'btn btn-primary' %>
          <% end %>
    </div>
  </div>

</section>